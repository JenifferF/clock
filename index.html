<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title>clock</title>
</head>
<style>
	#canvas{
		/*border: 1px solid red;*/
		display: block;
		margin:0 auto;
	}
</style>
<body>
	<canvas width="500" height="500" id="canvas"></canvas>
</body>
<script>
	var canvas=document.querySelector('#canvas');
	var ctx=canvas.getContext('2d');
    
    var chonghui=function(){
    	ctx.save();
    // 画背景
        var img=new Image();
        img.src='b.png';
        img.onload=function(){
        ctx.clearRect(0,0,500,500);
        var ptrn=ctx.createPattern(img,'repeat');
        ctx.fillStyle=ptrn;
        ctx.fillRect(0,0,500,500);
        ctx.save();
        ctx.restore();
        
    // 画秒针
        var now=new Date();
        var seconds=now.getSeconds();
        var milsec=now.getMilliseconds();
        ctx.translate(250,250);
        ctx.moveTo(0,0);
        ctx.beginPath();
        ctx.save();    
        ctx.rotate((Math.PI/180)*(360*(seconds*1000+milsec)/60000))      
        ctx.moveTo(0,-5);
        ctx.lineTo(0,-70);
        ctx.moveTo(0,5);
        ctx.lineTo(0,15);
        ctx.strokeStyle='red';
        ctx.lineWidth=2;
        ctx.shadowOffsetX=3;
        ctx.shadowOffsetY=2;
        ctx.shadowColor='rgba(0,0,0,0.3)';
        ctx.stroke();
        ctx.restore();

    // 画分针
        ctx.save();
        ctx.beginPath();
        var seconds=now.getSeconds();
        var minutes=now.getMinutes();
        ctx.rotate(Math.PI/180*(360*(minutes*60+seconds)/3600));
        ctx.moveTo(0,-5);
        ctx.lineTo(0,-60);
        ctx.moveTo(0,5);
        ctx.lineTo(0,15);
        ctx.shadowOffsetX=3;
        ctx.shadowOffsetY=2;
        ctx.lineWidth=3;
        ctx.strokeStyle='#6A6A6A';
        ctx.shadowColor='rgba(0,0,0,0.2)';
        ctx.stroke();
        ctx.restore();

    // 画时针
        ctx.save();
        ctx.beginPath();
        var seconds=now.getSeconds();
        var minutes=now.getMinutes();
        var hours=now.getHours();
        ctx.rotate(Math.PI/180*(360*(hours*3600+minutes*60+seconds)/43200));
        ctx.moveTo(0,-5);
        ctx.lineTo(0,-35);
        ctx.moveTo(0,5);
        ctx.lineTo(0,15);
        ctx.strokeStyle='#454545';
        ctx.lineWidth=5;
        ctx.shadowOffsetX=5;
        ctx.shadowOffsetY=4;
        ctx.shadowColor='rgba(0,0,0,0.1)';
        ctx.stroke();
        ctx.restore();

    // 画圆心
        ctx.beginPath();
        ctx.arc(0,0,4,0,(Math.PI/180)*360);
        var graadient=ctx.createRadialGradient(0,0,0,2,2,5);
        graadient.addColorStop(0,'rgba(255,255,255,0.2)');
        graadient.addColorStop(1,'red');
        ctx.fillStyle='red';
        ctx.fill();
        ctx.strokeStyle='#999';
        ctx.stroke();
        ctx.closePath();
        ctx.save();
        ctx.restore();
        ctx.restore();
}
}
// chonghui();
setInterval(chonghui,1);
</script>
</html>